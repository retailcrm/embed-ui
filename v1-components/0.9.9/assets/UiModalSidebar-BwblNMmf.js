import{g as U,B as j,r as S,h as $,C as V,D as F,E as H,G as Y,H as P,q as M,v as I,m as h,w as g,u as r,J as q,i as J,o as c,K as Z,a as m,t as Q,c as O,n as W,j as b,z as X,L as ee}from"./iframe-CzwIxcDt.js";import{_ as ae}from"./UiScrollBox-Z6nXCOaZ.js";import{_ as A}from"./UiTransition-Kg8ZojDG.js";import{_ as ie}from"./UiTooltip-C6tf22td.js";import{I as oe}from"./clear-CbqGf0q6.js";import{u as ne,l as v,n as R,M as te}from"./uid-DZnMQ8Rh.js";var y=(e=>(e.CLICK_CROSS="Cross",e.CLICK_OUTSIDE="Outside",e.KEY_ESC="Esc",e))(y||{}),w=(e=>(e.LEFT="left",e.RIGHT="right",e))(w||{}),p=(e=>(e.NORMAL="normal",e.NATIVE="native",e.NONE="none",e))(p||{}),T=(e=>(e.LG="lg",e.SM="sm",e))(T||{});const se=["id","aria-hidden"],de=["id"],le={class:"ui-v1-modal-sidebar__header"},re={class:"ui-v1-modal-sidebar__header-inner"},ue={"aria-level":"1",class:"ui-v1-modal-sidebar__title",role:"heading"},ce={key:0,class:"ui-v1-modal-sidebar__body-fixed"},me={key:2,class:"ui-v1-modal-sidebar__footer"},ve=U({inheritAttrs:!1,__name:"UiModalSidebar",props:{id:{type:String,default:()=>ne("embed-modal-sidebar")},opened:{type:Boolean,default:!1},closable:{type:Boolean,default:!0},direction:{type:String,validator:e=>Object.values(w).includes(e),default:w.RIGHT},disposeTimeout:{type:null,default:5e3},fixed:{type:Boolean,default:!1},scrolling:{type:String,validator:e=>Object.values(p).includes(e),default:p.NORMAL},size:{type:String,default:T.SM}},emits:["open","close","close-cancel","toggle","shown","showing","hidden","hiding","update:opened","update:overlapped","scroll:y:end"],setup(e,{emit:D}){const t=e,n=D,z=J(te,null),a=j({attached:!1,shown:!1,hiding:!1,detachTimer:null,overlapped:!1}),k=S(null),K=$(()=>k),f=$(()=>({id:t.id,isBlocker:()=>!t.fixed,isOverlapped:()=>a.overlapped,setIsOverlapped:i=>{a.overlapped!==i&&(a.overlapped=i,n("update:overlapped",i))},emitEscape:()=>{a.overlapped||E(y.KEY_ESC)}})),d=S("hidden"),l=S("hidden"),N=$(()=>{switch(!0){case(d.value==="shown"&&l.value==="shown"):return"shown";case(d.value==="showing"||l.value==="showing"):return"showing";case(d.value==="hiding"||l.value==="hiding"):return"hiding"}return"hidden"}),L=()=>{v.remove(f.value),a.attached=!1},B=()=>{a.detachTimer===null&&(a.detachTimer=setTimeout(()=>L(),t.disposeTimeout?Number(t.disposeTimeout):0))},_=()=>{a.detachTimer!==null&&(clearTimeout(a.detachTimer),a.detachTimer=null)},C=async()=>{a.hiding=!1,_(),!a.shown&&(v.remove(f.value),v.add(f.value),v.start(),a.attached=!0,await R(),await R(),a.hiding||(a.shown=!0,n("update:opened",!0),n("toggle",!0),n("open")))},u=(i=void 0)=>{if(a.hiding=!0,!a.shown){a.attached&&B();return}a.shown=!1,n("update:opened",!1),n("toggle",!1),n("close",i),v.remove(f.value),_(),B()},E=(i=void 0)=>{t.closable?u(i):n("close-cancel",i)};V(()=>t.opened,i=>i?C():u()),V(()=>N.value,(i,o)=>{i!==o&&(i==="shown"?n("shown"):i==="showing"?n("showing"):i==="hidden"?n("hidden"):i==="hiding"&&n("hiding"))}),F(()=>{t.opened&&C(),n("update:overlapped",a.overlapped)}),H(()=>t.opened?C():u()),Y(u),P(()=>{u(),L()});const x=i=>{i.target===i.currentTarget&&!a.overlapped&&E(y.CLICK_OUTSIDE)},G=()=>{a.overlapped||E(y.CLICK_CROSS)};return(i,o)=>a.attached?(c(),M(q,{key:0,to:r(z)?.container||"body"},[h(A,{name:"fade-2",onBeforeEnter:o[5]||(o[5]=s=>d.value="showing"),onAfterEnter:o[6]||(o[6]=s=>d.value="shown"),onBeforeLeave:o[7]||(o[7]=s=>d.value="hiding"),onAfterLeave:o[8]||(o[8]=s=>d.value="hidden")},{default:g(()=>[Z(m("div",Q({id:e.id,"aria-hidden":N.value!=="shown"?"true":"false",class:[i.$attrs.class,{"ui-v1-modal":!0,"ui-v1-modal_overlapped":a.overlapped,"ui-v1-modal-sidebar-overlay":!0,"ui-v1-modal-sidebar-overlay_fixed":e.fixed,[`ui-v1-modal-sidebar-overlay_${e.direction}`]:e.fixed}],"aria-modal":"true"},i.$attrs,{onClick:x}),[h(A,{name:`slide-${e.direction}`,onBeforeEnter:o[1]||(o[1]=s=>l.value="showing"),onAfterEnter:o[2]||(o[2]=s=>l.value="shown"),onBeforeLeave:o[3]||(o[3]=s=>l.value="hiding"),onAfterLeave:o[4]||(o[4]=s=>l.value="hidden")},{default:g(()=>[a.shown?(c(),O("aside",{key:0,id:e.id+"-sidebar",class:W({"ui-v1-modal-sidebar":!0,"ui-v1-modal-sidebar_left":e.direction===r(w).LEFT,"ui-v1-modal-sidebar_size_sm":e.size===r(T).SM,"ui-v1-modal-sidebar_size_lg":e.size===r(T).LG})},[m("header",le,[m("div",re,[m("div",ue,[b(i.$slots,"title",{overlapped:a.overlapped})])]),m("div",{ref_key:"closer",ref:k,"aria-label":"Esc",class:"ui-v1-modal-sidebar__close",role:"button",onClick:G},[h(r(oe),{"aria-hidden":"true",width:"32"}),h(ie,{target:K.value,"offset-main-axis":0},{default:g(()=>[...o[9]||(o[9]=[X(" Esc ",-1)])]),_:1},8,["target"])],512)]),e.scrolling===r(p).NONE?(c(),O("div",ce,[b(i.$slots,"default",{overlapped:a.overlapped})])):(c(),M(ae,{key:1,native:e.scrolling===r(p).NATIVE,class:"ui-v1-modal-sidebar__body","show-on-mac":"",onPsYReachEnd:o[0]||(o[0]=s=>i.$emit("scroll:y:end"))},{default:g(()=>[b(i.$slots,"default",{overlapped:a.overlapped})]),_:3},8,["native"])),"footer"in i.$slots?(c(),O("footer",me,[b(i.$slots,"footer",{overlapped:a.overlapped})])):I("",!0)],10,de)):I("",!0)]),_:3},8,["name"])],16,se),[[ee,a.shown]])]),_:3})],8,["to"])):I("",!0)}});ve.__docgenInfo={exportName:"default",displayName:"UiModalSidebar",description:"",tags:{},props:[{name:"id",description:"Атрибут id корневого элемента. Должен быть уникальным на странице",type:{name:"string"},defaultValue:{func:!0,value:"() => uid('embed-modal-sidebar')"}},{name:"opened",description:"Флаг управления раскрытием панели",type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"closable",description:"Флаг, указывающий, можно ли закрыть панель",type:{name:"boolean"},defaultValue:{func:!1,value:"true"}},{name:"direction",description:"Определяет направление появления панели",type:{name:"DIRECTION"},defaultValue:{func:!1,value:"DIRECTION.RIGHT"}},{name:"disposeTimeout",description:"Время, через которое плавающий элемент удаляется со страницы, если был скрыт",type:{name:"number|string|null"},defaultValue:{func:!1,value:"5000"}},{name:"fixed",description:"Флаг, задающий фиксированную панель без подложки",type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"scrolling",description:"Тип прокрутки",type:{name:"SCROLLING"},defaultValue:{func:!1,value:"SCROLLING.NORMAL"}},{name:"size",description:"Размер панели",type:{name:"SIZE"},defaultValue:{func:!1,value:"SIZE.SM"}}],events:[{name:"scroll:y:end",description:"Срабатывает при прокрутке содержимого в самый конец по y-оси"},{name:"open",description:"Срабатывает при открытии панели"},{name:"close",description:"Срабатывает при закрытии панели. Содержит данные о методе закрытия CLOSE_METHOD из @omnica/modal-sidebar"},{name:"close-cancel",description:`Срабатывает при попытке закрыть панели, если флаг closable выставлен в false.
Содержит данные о методе закрытия CLOSE_METHOD из @omnica/modal-sidebar`},{name:"toggle",description:"Срабатывает при раскрытии и закрытии панели, содержит актуальное значение флага opened"},{name:"shown",description:"Срабатывает при завершении раскрытия"},{name:"showing",description:"Срабатывает в начале раскрытия"},{name:"hidden",description:"Срабатывает при завершении сокрытия"},{name:"hiding",description:"Срабатывает в начале сокрытия"},{name:"update:opened",description:"Изменение значения флага opened"},{name:"update:overlapped",description:"Срабатывает при изменении состояния перекрытия"}],slots:[{name:"title",scoped:!0,bindings:[{name:"overlapped",title:"binding"}]},{name:"default",scoped:!0,bindings:[{name:"overlapped",title:"binding"}]},{name:"footer",scoped:!0,bindings:[{name:"overlapped",title:"binding"}]}],sourceFiles:["/home/runner/work/embed-ui/embed-ui/packages/v1-components/src/host/components/modal-sidebar/UiModalSidebar.vue"]};export{w as D,T as S,ve as _,p as a};
