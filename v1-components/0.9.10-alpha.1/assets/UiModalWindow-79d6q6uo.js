import{g as D,B as G,r as L,h as U,C as S,D as Y,E as q,G as Q,H as X,S as Z,U as ee,q as N,O as v,K as ne,L as oe,i as ae,J as le,o as p,c as m,a as _,w as I,t as te,v as B,n as ie,u as w,j as h,m as M}from"./iframe-CzwIxcDt.js";import{_ as j}from"./UiScrollBox-Z6nXCOaZ.js";import{_ as R}from"./UiTransition-Kg8ZojDG.js";import{e as H}from"./utils-BqzVSXwn.js";import{u as x,l as y,n as W,M as se}from"./uid-DZnMQ8Rh.js";import{I as de}from"./clear-CbqGf0q6.js";var d=(e=>(e.ALERT="alert",e.DIALOG="dialog",e.POPUP="popup",e.HINT="hint",e))(d||{}),g=(e=>(e.NORMAL="normal",e.NATIVE="native",e))(g||{});const z=D({__name:"UiModalWindowSurface",props:{id:{type:String,default:()=>x("embed-modal-window")},opened:{type:Boolean,default:!0},closable:{type:Boolean,default:!0},appearance:{type:String,validator:e=>H(e).toBeOneOf(d),default:d.POPUP},fullscreen:{type:Boolean,default:!1},responsive:{type:Boolean,default:!1},disposeTimeout:{type:null,default:5e3},scrolling:{type:String,validator:e=>Object.values(g).includes(e),default:g.NORMAL}},emits:["open","close","close-cancel","shown","showing","hidden","hiding","scroll:y","scroll:y:end","update:opened","update:overlapped"],setup(e,{expose:f,emit:$}){const i=e,t=$,s=ae(se,null),o=G({attached:!1,shown:!1,hiding:!1,detachTimer:null,overlapped:!1}),P=L(null),u=U(()=>({id:i.id,isBlocker:()=>!0,isOverlapped:()=>o.overlapped,setIsOverlapped:a=>{o.overlapped!==a&&(o.overlapped=a,t("update:overlapped",a))},emitEscape:()=>{o.overlapped||A()}})),c=L("hidden"),n=L("hidden"),l=U(()=>{switch(!0){case(c.value==="shown"&&n.value==="shown"):return"shown";case(c.value==="showing"||n.value==="showing"):return"showing";case(c.value==="hiding"||n.value==="hiding"):return"hiding"}return"hidden"}),r=()=>{y.remove(u.value),o.attached=!1},V=()=>{o.detachTimer===null&&(o.detachTimer=setTimeout(()=>r(),i.disposeTimeout?Number(i.disposeTimeout):0))},k=()=>{o.detachTimer!==null&&(clearTimeout(o.detachTimer),o.detachTimer=null)},T=async()=>{o.hiding=!1,k(),!o.shown&&(y.remove(u.value),y.add(u.value),y.start(),o.attached=!0,await W(),await W(),o.hiding||(o.shown=!0,t("update:opened",!0),t("open")))},b=()=>{if(o.hiding=!0,!o.shown){o.attached&&V();return}o.shown=!1,t("update:opened",!1),t("close"),y.remove(u.value),k(),V()},A=(a=void 0)=>{a?.target?.closest(".ps__thumb-y")||(i.closable?b():t("close-cancel"))};f({open:T,close:A}),S(()=>i.id,(a,O)=>y.replace(O,u.value)),S(()=>i.opened,a=>a?T():b()),S(()=>l.value,(a,O)=>{a!==O&&(a==="shown"?t("shown"):a==="showing"?t("showing"):a==="hidden"?t("hidden"):a==="hiding"&&t("hiding"))}),Y(()=>{i.opened&&T(),t("update:overlapped",o.overlapped)}),q(()=>i.opened?T():b()),Q(b),X(()=>{b(),r()});const E=Z(),F=ee(),J=()=>{const a=i.appearance;return v(R,{name:"zoom",onBeforeEnter:()=>n.value="showing",onAfterEnter:()=>n.value="shown",onBeforeLeave:()=>n.value="hiding",onAfterLeave:()=>n.value="hidden"},()=>o.shown?v("div",{ref:P,class:{"ui-v1-modal-window":!0,"ui-v1-modal-window_alert":a===d.ALERT,"ui-v1-modal-window_dialog":a===d.DIALOG,"ui-v1-modal-window_popup":a===d.POPUP,"ui-v1-modal-window_hint":a===d.HINT,"ui-v1-popper-container":!0}},F):[])},C=a=>{a.target===a.currentTarget&&!o.overlapped&&A(a)},K=()=>o.attached?v(le,{to:s?.container??document.body},v(R,{name:"fade-2",onBeforeEnter:()=>c.value="showing",onAfterEnter:()=>c.value="shown",onBeforeLeave:()=>c.value="hiding",onAfterLeave:()=>c.value="hidden"},{default:()=>ne(v("div",{id:i.id,"aria-hidden":l.value!=="shown"?"true":"false","aria-modal":"true",...E,class:[E.class,{"ui-v1-modal":!0,"ui-v1-modal_overlapped":o.overlapped}],onClick:C},v(j,{class:{"ui-v1-modal-window-container":!0,"ui-v1-modal-window-container_fullscreen":i.fullscreen,"ui-v1-modal-window-container_responsive":i.responsive&&i.appearance===d.POPUP},showOnMac:!0,native:i.scrolling===g.NATIVE,onClick:C,onPsYReachEnd:a=>t("scroll:y:end",a),onScroll:a=>{o.overlapped||t("scroll:y",a,P.value?.getBoundingClientRect()?.toJSON()??null)}},{default:J})),[[oe,o.shown]])})):void 0;return(a,O)=>(p(),N(K))}});z.__docgenInfo={exportName:"default",displayName:"UiModalWindowSurface",description:"",tags:{},expose:[{name:"open"},{name:"close"}],props:[{name:"id",description:"Атрибут id корневого элемента модального окна. Должен быть уникальным на странице",type:{name:"string"},defaultValue:{func:!0,value:"() => uid('embed-modal-window')"}},{name:"opened",description:"Открыто/закрыто",type:{name:"boolean"},defaultValue:{func:!1,value:"true"}},{name:"closable",description:"Закрываемое. Возможность закрыть модальное окно",type:{name:"boolean"},defaultValue:{func:!1,value:"true"}},{name:"appearance",description:"Внешний вид",type:{name:"APPEARANCE"},defaultValue:{func:!1,value:"APPEARANCE.POPUP"}},{name:"fullscreen",description:"Вывод на весь экран",type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"responsive",description:`Резиновое. Размещено в центре страницы. Отступы от любой границы составляет 32 px.
Резиновое окно не может выходить за пределы области просмотра, так как контент прокручивается внутри него.
Шапка и футер у данного типа окна закреплены и не прокручиваются.
При достижении ширины 1 680 px окно перестает увеличиваться и фиксируется по центру браузера.`,type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"disposeTimeout",description:"Время, через которое плавающий элемент удаляется со страницы, если был скрыт",type:{name:"number|string|null"},defaultValue:{func:!1,value:"5000"}},{name:"scrolling",description:"Тип прокрутки",type:{name:"SCROLLING"},defaultValue:{func:!1,value:"SCROLLING.NORMAL"}}],events:[{name:"open",description:"Срабатывает при открытии"},{name:"close",description:"Срабатывает при закрытии"},{name:"close-cancel",description:"Срабатывает при отмене закрытия"},{name:"shown",description:"Срабатывает при завершении раскрытия"},{name:"showing",description:"Срабатывает в начале раскрытия"},{name:"hidden",description:"Срабатывает при завершении сокрытия"},{name:"hiding",description:"Срабатывает в начале сокрытия"},{name:"scroll:y",description:"Срабатывает при прокрутке контейнера по оси y *"},{name:"scroll:y:end",description:"Срабатывает при прокрутке контейнера в самый конец по оси y *"},{name:"update:opened",description:"Обновление флага видимости"},{name:"update:overlapped",description:"Срабатывает при изменении состояния перекрытия"}],sourceFiles:["/home/runner/work/embed-ui/embed-ui/packages/v1-components/src/host/components/modal-window/UiModalWindowSurface.vue"]};const re={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"};function pe(e,f){return p(),m("svg",re,[...f[0]||(f[0]=[_("path",{fill:"currentColor","fill-rule":"evenodd",d:"M22.905 19.63 12.813 2.37a.76.76 0 0 0-.65-.37h-.3a.76.76 0 0 0-.65.37L1.1 19.63a.79.79 0 0 0 0 .76l.14.23a.73.73 0 0 0 .65.38h20.225a.73.73 0 0 0 .65-.38l.14-.23a.79.79 0 0 0 0-.76m-9.902-3.13a.5.5 0 0 1-.5.5h-1a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5zm-.47-3.5a.25.25 0 0 0 .25-.22l.4-3.22a.5.5 0 0 0-.5-.56h-1.36a.5.5 0 0 0-.5.56l.4 3.22a.25.25 0 0 0 .25.22z","clip-rule":"evenodd"},null,-1)])])}const ce={render:pe},ue={key:0,class:"ui-v1-modal-window__icon"},me=["id"],fe={key:1,class:"ui-v1-modal-window__content"},ve={key:2,class:"ui-v1-modal-window__footer"},we={key:0,class:"ui-v1-modal-window__footer-text"},he=D({__name:"UiModalWindow",props:{id:{type:String,default:()=>x("embed-modal-window")},opened:{type:Boolean,default:!0},closable:{type:Boolean,default:!0},appearance:{type:String,validator:e=>H(e).toBeOneOf(d),default:d.POPUP},disposeTimeout:{type:null,default:5e3},fullscreen:{type:Boolean,default:!1},responsive:{type:Boolean,default:!1},scrolling:{type:String,validator:e=>Object.values(g).includes(e),default:g.NORMAL}},emits:["update:opened","toggle","open","opened","close","closed","close-cancel","container:scroll:y","container:scroll:y:end","content:scroll:y:end"],setup(e,{expose:f,emit:$}){const i=e,t=$,s=G({opened:i.opened,scrolled:!1,overlapped:!1}),o=n=>{s.opened!==n&&(s.opened=n,t("update:opened",n),t("toggle",n),t(n?"open":"close"))},P=()=>o(!0),u=()=>{i.closable?o(!1):t("close-cancel")},c=(n,l)=>{t("container:scroll:y",n,l),l&&(s.scrolled=l.top<=0)};return f({open:P,close:u}),S(()=>i.opened,o),(n,l)=>(p(),N(z,te({id:e.id,opened:s.opened,closable:e.closable,appearance:e.appearance,fullscreen:e.fullscreen,responsive:e.responsive,"dispose-timeout":e.disposeTimeout,scrolling:e.scrolling},{...n.$attrs,...n.$slots.title?{"aria-labelledby":e.id+"-title"}:{}},{"onUpdate:opened":o,"onUpdate:overlapped":l[2]||(l[2]=r=>s.overlapped=r),onCloseCancel:l[3]||(l[3]=r=>n.$emit("close-cancel")),onShown:l[4]||(l[4]=r=>n.$emit("opened")),onHidden:l[5]||(l[5]=r=>n.$emit("closed")),"onScroll:y":c,"onScroll:y:end":l[6]||(l[6]=r=>n.$emit("container:scroll:y:end",r))}),{default:I(()=>[_("div",{class:ie({"ui-v1-modal-window__header":!0,"ui-v1-modal-window__header_pinned":n.$slots.title&&s.scrolled&&e.appearance===w(d).POPUP&&!e.responsive})},[e.appearance===w(d).ALERT?(p(),m("div",ue,[h(n.$slots,"icon",{overlapped:s.overlapped},()=>[M(w(ce))])])):B("",!0),n.$slots.title?(p(),m("div",{key:1,id:e.id+"-title",class:"ui-v1-modal-window__title"},[h(n.$slots,"title",{overlapped:s.overlapped})],8,me)):B("",!0),e.appearance!==w(d).ALERT?(p(),m("div",{key:2,"aria-label":"Esc",class:"ui-v1-modal-window__close",role:"button",onClick:l[0]||(l[0]=r=>s.overlapped?null:u())},[M(w(de),{title:"Esc",style:{width:"100%"}})])):B("",!0)],2),e.responsive?(p(),N(j,{key:0,class:"ui-v1-modal-window__content","show-on-mac":"",onPsYReachEnd:l[1]||(l[1]=r=>n.$emit("content:scroll:y:end"))},{default:I(()=>[h(n.$slots,"default",{overlapped:s.overlapped})]),_:3})):(p(),m("div",fe,[h(n.$slots,"default",{overlapped:s.overlapped})])),n.$slots.footer?(p(),m("div",ve,[e.appearance===w(d).HINT?(p(),m("div",we,[h(n.$slots,"footer",{overlapped:s.overlapped})])):h(n.$slots,"footer",{key:1,overlapped:s.overlapped})])):B("",!0)]),_:3},16,["id","opened","closable","appearance","fullscreen","responsive","dispose-timeout","scrolling"]))}});he.__docgenInfo={exportName:"default",displayName:"UiModalWindow",description:"",tags:{},expose:[{name:"open"},{name:"close"}],props:[{name:"id",description:"Атрибут id корневого элемента модального окна. Должен быть уникальным на странице",type:{name:"string"},defaultValue:{func:!0,value:"() => uid('embed-modal-window')"}},{name:"opened",description:"Открыто/закрыто",type:{name:"boolean"},defaultValue:{func:!1,value:"true"}},{name:"closable",description:"Закрываемое. Возможность закрыть модальное окно",type:{name:"boolean"},defaultValue:{func:!1,value:"true"}},{name:"appearance",description:"Внешний вид: алерт, диалог, popup, hint",type:{name:"APPEARANCE"},defaultValue:{func:!1,value:"APPEARANCE.POPUP"}},{name:"disposeTimeout",description:"Время, через которое плавающий элемент удаляется со страницы, если был скрыт",type:{name:"number|string|null"},defaultValue:{func:!1,value:"5000"}},{name:"fullscreen",description:"Вывод на весь экран",type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"responsive",description:`Резиновое. Размещено в центре страницы. Отступы от любой границы составляет 32 px.
Резиновое не может выходить за пределы браузера, так как контент прокручивается внутри него.
Шапка и футер у данного типа окна закреплены и не прокручиваются.
При достижении ширины 1 680 px окно перестает увеличиваться и фиксируется по центру браузера.`,type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"scrolling",description:"Тип прокрутки",type:{name:"SCROLLING"},defaultValue:{func:!1,value:"SCROLLING.NORMAL"}}],events:[{name:"close-cancel",description:"Срабатывает при отмене закрытия"},{name:"opened",description:"Срабатывает при завершении открытия"},{name:"closed",description:"Срабатывает при завершении закрытия"},{name:"container:scroll:y:end",description:"Срабатывает при прокрутке контейнера в самый конец по y-оси"},{name:"content:scroll:y:end",description:"Срабатывает при прокрутке контента в самый конец по y-оси"},{name:"update:opened",description:"Срабатывает при открытии/закрытии"},{name:"toggle",description:"Срабатывает при открытии/закрытии"},{name:"open",description:"Срабатывает при открытии"},{name:"close",description:"Срабатывает при закрытии"},{name:"container:scroll:y",description:"Срабатывает при прокрутке контейнера"}],slots:[{name:"icon",scoped:!0,description:"Иконка слева от заголовка",bindings:[{name:"overlapped",title:"binding"}]},{name:"title",scoped:!0,description:"Заголовок",bindings:[{name:"overlapped",title:"binding"}]},{name:"default",scoped:!0,description:"Основная разметка",bindings:[{name:"overlapped",title:"binding"}]},{name:"footer",scoped:!0,description:"Разметка подвала",bindings:[{name:"overlapped",title:"binding"}]}],sourceFiles:["/home/runner/work/embed-ui/embed-ui/packages/v1-components/src/host/components/modal-window/UiModalWindow.vue"]};export{d as A,g as S,he as _};
