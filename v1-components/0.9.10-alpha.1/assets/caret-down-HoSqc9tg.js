import{c as m,o as p,a as P,g as te,h as b,X as ae,D as ne,C as le,v as $,j as A,u as v,m as ie,t as ue,Y as W,Z as oe,i as se,z as G,A as j}from"./iframe-CzwIxcDt.js";import{u as re}from"./composables-B2GYaaEv.js";import{d as ce}from"./index-BAxMPZdI.js";import{I as de}from"./plugin-yyqTwYeo.js";const fe={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"};function me(e,l){return p(),m("svg",fe,[...l[0]||(l[0]=[P("path",{fill:"currentColor","fill-rule":"evenodd",d:"M4 12a8 8 0 1 1 16 0 8 8 0 0 1-16 0m11 2.045c0-.122-.05-.24-.14-.324L13.148 12l1.712-1.721a.445.445 0 0 0 0-.648l-.49-.49a.444.444 0 0 0-.649 0L12 10.851 10.279 9.14a.444.444 0 0 0-.648 0l-.49.49a.444.444 0 0 0 0 .649L10.851 12 9.14 13.721a.444.444 0 0 0 0 .648l.49.49a.444.444 0 0 0 .649 0L12 13.149l1.721 1.712a.444.444 0 0 0 .648 0l.49-.49a.45.45 0 0 0 .141-.325","clip-rule":"evenodd"},null,-1)])])}const pe={render:me};var y=(e=>(e.EMAIL="email",e.PASSWORD="password",e.PHONE="tel",e.SEARCH="search",e.TEXT="text",e.URL="url",e))(y||{}),s=(e=>(e.DECIMAL="decimal",e.EMAIL="email",e.NONE="none",e.NUMERIC="numeric",e.SEARCH="search",e.TEL="tel",e.TEXT="text",e.URL="url",e))(s||{}),h=(e=>(e.XS="xs",e.SM="sm",e.MD="md",e.LG="lg",e.XL="xl",e))(h||{});const C=e=>{const[,l]=String(e).replace(",",".").split(".");return l?l.length:0},ve=(e,l)=>l!==void 0&&C(e)>l,ye=e=>e.replace(/\D+/g,""),xe=(e,l,r)=>{let n=e.replace(/,/g,".");return n=n.replace(/-/g,""),l&&e.trim().startsWith("-")&&(n="-"+n),n=n.replace(/[^0-9.-]/g,""),n=be(n),n.indexOf("-")>0&&(n=n.replace(/-/g,"")),n=ge(n),n=he(n,r),n};function ge(e){const l=e.match(/^(-)?(\d+)(?:\.(\d*))?$/);if(l){const r=l[1]??"";let n=l[2];const x=l[3]??"";return n=n.replace(/^0+(?=\d)/,""),n===""&&(n="0"),n==="0"&&x===""&&!/\.$/.test(e)?`${r}${n}`:x!==""||/\.$/.test(e)?`${r}${n}.${x}`:`${r}${n}`}return e}function be(e){const l=e.indexOf(".");return l!==-1?e.slice(0,l+1)+e.slice(l+1).replace(/\./g,""):e}function he(e,l){if(l!=="*"){const r=e.match(/^(-)?(\d+)(?:\.(\d*))?$/);if(r){const n=r[1]??"",x=r[2],i=(r[3]??"").slice(0,l);return i.length>0&&l>0?`${n}${x}.${i}`:`${n}${x}`}}return e}const Se="Clear",Ee={clear:Se},Ne="Borrar",we={clear:Ne},$e="Очистить",ke={clear:$e},Z=ce({messages:{"en-GB":Ee,"es-ES":we,"ru-RU":ke}}),Ve=["id"],Ae={key:0,class:"ui-v1-textbox__prefix"},Le=["id","type","value","max","min","step","aria-invalid","autocomplete","inputmode","maxlength","placeholder","readonly","required","disabled"],Ce=["id","value","aria-invalid","autocomplete","inputmode","maxlength","placeholder","rows","cols","readonly","required","disabled"],Re={key:4,class:"ui-v1-textbox__eraser"},Ie={key:6,class:"ui-v1-textbox__suffix"},Me=te({__name:"UiTextbox",props:{id:{type:null,validator:e=>e===void 0||typeof e=="string"&&e.length>0&&/^[A-Za-z]/.test(e),default:void 0},type:{type:String,validator:e=>Object.values(y).includes(e),default:y.TEXT},value:{type:null,default:null},max:{type:null,validator:e=>!isNaN(Number(e)),default:1/0},min:{type:null,validator:e=>!isNaN(Number(e)),default:-1/0},step:{type:null,validator:e=>e==="any"||!isNaN(Number(e)),default:1},autocomplete:{type:String,validator:e=>["on","off"].includes(e),default:"off"},inputmode:{type:String,default:void 0},maxlength:{type:[Number,String],default:void 0},decimals:{type:[Number,String],validator:e=>e==="*"||!isNaN(Number(e)),default:"*"},size:{type:String,default:h.SM},placeholder:{type:String,default:""},prefix:{type:String,default:""},suffix:{type:String,default:""},active:{type:Boolean,default:!1},autofocus:{type:Boolean,default:!1},autoselect:{type:Boolean,default:!1},clearable:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},required:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},invalid:{type:Boolean,default:!1},multiline:{type:Boolean,default:!1},rows:{type:[Number,String],validator:e=>!isNaN(Number(e)),default:2},cols:{type:[Number,String],validator:e=>!isNaN(Number(e)),default:20},outlined:{type:Boolean,default:!0}},emits:["input","keydown","change","paste","focus","blur","update:focused","update:value","clear"],setup(e,{expose:l,emit:r}){const n=["Backspace","Delete","Enter","ArrowLeft","ArrowRight"],x=["Alt","CapsLock","Control","Shift","Meta"],i=e,o=r,k=oe(),Y=b(()=>Z.init(se(de,null)?.locale??Z.fallback)),L=b(()=>{if(i.decimals==="*"||i.decimals===void 0)return"*";const t=Number(i.decimals);return isNaN(t)||t<0?"*":t}),S=b(()=>{const t=i.inputmode,a=i.type;if(a===y.TEXT||a===y.PASSWORD)return t;const u=(c,f)=>{if(c!==void 0&&(c===s.TEXT||c===f))return c};switch(a){case y.EMAIL:return t===void 0?s.EMAIL:u(t,s.EMAIL);case y.PHONE:return t===void 0?s.TEL:u(t,s.TEL);case y.SEARCH:return t===void 0?s.SEARCH:u(t,s.SEARCH);case y.URL:return t===void 0?s.URL:u(t,s.URL);default:return t}}),g=b(()=>S.value===s.DECIMAL),J=b(()=>g.value&&L.value===0),R=b(()=>Number(i.min)<0),V=b(()=>{if(i.value===null)return"";const t=L.value,a=String(i.value);if(g.value&&t!=="*"&&ve(a,t)){const u=t===0?new RegExp("^-?\\d+"):new RegExp("^-?\\d+(?:\\.\\d{"+t+"})?");return(a.match(u)??[])[0]??""}return a}),Q=t=>{const a=t.key==="ArrowUp";if(!a&&t.key!=="ArrowDown")return;const u=Number(i.max),c=Number(i.min),f=i.step==="any"?1:Number(i.step),N=Number(i.value),w=a?N+f:N-f;(a&&w<=u||!a&&w>=c)&&o("update:value",w.toFixed(Math.max(C(f),C(N))))},I=()=>{o("update:value",""),o("clear")},M=t=>g.value?xe(t,R.value,L.value):S.value===s.NUMERIC?ye(t):t,B=t=>{const a=t.target,u=M(a.value);u!==a.value&&(a.value=u),u!==i.value&&o("update:value",u),o("input",t)},T=async t=>{t.preventDefault();const a=t.clipboardData?.getData("text")??"";a&&(await F(a),o("paste",t))},D=t=>{const u=t.target.value;u!==i.value&&o("update:value",u),o("change",t)},z=t=>{if(x.includes(t.key))return;const a=t.target,u=!isNaN(+t.key),c=t.key==="E"||t.key==="e",f=n.includes(t.key),N=t.key===".",w=t.key==="-",ee=(a.selectionStart??0)===0;if(g.value){if(!u&&!(N&&!a.value.includes(".")&&!J.value)&&!(w&&!a.value.startsWith("-")&&R.value&&ee)&&!f&&!t.ctrlKey&&!t.metaKey||c)return t.preventDefault(),Q(t)}else if(S.value===s.NUMERIC&&!u&&!f&&!t.ctrlKey&&!t.metaKey){t.preventDefault();return}o("keydown",t),t.key==="Escape"&&a.blur()},_=re(),d=ae(null),K=()=>d.value?.selectionStart??0,X=()=>d.value?.selectionEnd??0,U=(t,a)=>d.value?.setSelectionRange(t,a),H=()=>d.value?.select(),E=()=>d.value?.focus(),q=async t=>{o("focus",t),o("update:focused",!0),d.value&&(i.autoselect||!i.outlined)&&!i.disabled&&(d.value.scrollLeft=d.value.scrollWidth,await W(),H())},O=t=>{o("blur",t),o("update:focused",!1)},F=async t=>{if(!t)return;const a=K(),u=X(),c=a+t.length,f=M(V.value.substring(0,a)+t+V.value.substring(u));o("update:value",f),await W(),U(c,c),E()};return l({getSelectionStart:K,getSelectionEnd:X,setSelectionRange:U,focus:E,blur:()=>d.value?.blur(),select:H,insert:F,clear:I}),ne(()=>{i.autofocus&&!i.disabled&&E()}),le(()=>i.value,t=>{if(!g.value||typeof t!="string"||!t.includes(","))return;const a=t.replace(/,/g,".");/^-?\d*(?:\.\d*)?$/.test(a)&&o("update:value",a)},{immediate:!0}),(t,a)=>(p(),m("span",ue({id:(e.id??v(k))+"-group",ref_key:"root",ref:_,class:{"ui-v1-textbox":!0,"ui-v1-textbox_active":e.active,"ui-v1-textbox_invalid":e.invalid,"ui-v1-textbox_outlined":e.outlined,"ui-v1-textbox_xs":e.size===v(h).XS,"ui-v1-textbox_md":e.size===v(h).MD,"ui-v1-textbox_lg":e.size===v(h).LG,"ui-v1-textbox_xl":e.size===v(h).XL}},t.$attrs),[e.prefix||"prefix"in t.$slots?(p(),m("span",Ae,[A(t.$slots,"default",{},()=>[G(j(e.prefix),1)])])):$("",!0),"leading-icon"in t.$slots?(p(),m("span",{key:1,class:"ui-v1-textbox__icon ui-v1-textbox__icon_leading",onClick:E},[A(t.$slots,"leading-icon")])):$("",!0),e.multiline?(p(),m("textarea",{key:3,id:e.id??v(k),ref_key:"textbox",ref:d,value:V.value,"aria-invalid":e.invalid?"true":"false",autocomplete:e.autocomplete,inputmode:S.value,maxlength:e.maxlength,placeholder:e.placeholder,rows:e.rows,cols:e.cols,readonly:e.readonly,required:e.required,disabled:e.disabled,onInput:B,onPaste:T,onKeydown:z,onChange:D,onFocus:q,onBlur:O},null,40,Ce)):(p(),m("input",{key:2,id:e.id??v(k),ref_key:"textbox",ref:d,type:e.type,value:V.value,max:g.value?e.max:void 0,min:g.value?e.min:void 0,step:g.value?e.step:void 0,"aria-invalid":e.invalid?"true":"false",autocomplete:e.autocomplete,inputmode:S.value,maxlength:e.maxlength,placeholder:e.placeholder,readonly:e.readonly,required:e.required,disabled:e.disabled,onInput:B,onPaste:T,onKeydown:z,onChange:D,onFocus:q,onBlur:O},null,40,Le)),e.clearable&&String(e.value)?(p(),m("span",Re,[ie(v(pe),{"aria-controls":e.id??v(k),"aria-label":Y.value.t("clear"),role:"button",onClick:I},null,8,["aria-controls","aria-label"])])):$("",!0),"trailing-icon"in t.$slots?(p(),m("span",{key:5,class:"ui-v1-textbox__icon ui-v1-textbox__icon_trailing",onClick:E},[A(t.$slots,"trailing-icon")])):$("",!0),e.suffix||"suffix"in t.$slots?(p(),m("span",Ie,[A(t.$slots,"default",{},()=>[G(j(e.suffix),1)])])):$("",!0)],16,Ve))}});Me.__docgenInfo={exportName:"default",displayName:"UiTextbox",description:"",tags:{},expose:[{name:"getSelectionStart",description:"Индекс первого выбранного символа"},{name:"getSelectionEnd",description:"Индекс последнего выбранного символа"},{name:"setSelectionRange",description:"Выбор значения внутри поля ввода с start символа по end символ"},{name:"focus",description:"Установка фокуса на поле ввода"},{name:"blur",description:"Сброс фокуса с поля ввода"},{name:"select",description:"Выбор значения внутри поля ввода"},{name:"insert",description:"Вставка значения"},{name:"clear",description:"Очистка поле ввода"}],props:[{name:"id",description:"Уникальный идентификатор поля",type:{name:"string | undefined"},defaultValue:{func:!1,value:"undefined"}},{name:"type",description:"Тип поля",type:{name:"TYPE | `${TYPE}`"},defaultValue:{func:!1,value:"TYPE.TEXT"}},{name:"value",description:"Значение поля",type:{name:"string | number | null"},defaultValue:{func:!1,value:"null"}},{name:"max",description:"Нативный атрибут input",type:{name:"number | `${number}`"},defaultValue:{func:!1,value:"Infinity"}},{name:"min",description:"Нативный атрибут input",type:{name:"number | `${number}`"},defaultValue:{func:!1,value:"-Infinity"}},{name:"step",description:"Нативный атрибут input",type:{name:"number | `${number}` | 'any'"},defaultValue:{func:!1,value:"1"}},{name:"autocomplete",description:"Нативный атрибут input|textarea",values:["on","off"],type:{name:"string"},defaultValue:{func:!1,value:"'off'"}},{name:"inputmode",description:"Нативный атрибут input|textarea",type:{name:"INPUTMODE | `${INPUTMODE}`"},defaultValue:{func:!1,value:"undefined"}},{name:"maxlength",description:"Нативный атрибут input|textarea",type:{name:"number|string"},defaultValue:{func:!1,value:"undefined"}},{name:"decimals",description:"Максимальное количество знаков после запятой",type:{name:"number | `${number}` | '*'"},defaultValue:{func:!1,value:"'*'"}},{name:"size",description:"Размер поля ввода",type:{name:"SIZE | `${SIZE}`"},defaultValue:{func:!1,value:"SIZE.SM"}},{name:"placeholder",description:"Нативный атрибут input|textarea",type:{name:"string"},defaultValue:{func:!1,value:"''"}},{name:"prefix",description:"Текст в начале поля ввода",type:{name:"string"},defaultValue:{func:!1,value:"''"}},{name:"suffix",description:"Текст в конце поля ввода",type:{name:"string"},defaultValue:{func:!1,value:"''"}},{name:"active",description:"Флаг активности, для индикации, что поле задействовано",type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"autofocus",description:"Автоматический focus на поле ввода сразу после монтирования",type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"autoselect",description:"Автоматический выбор значения в поле ввода при попадании в фокус",type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"clearable",description:"Включает кнопку очистки значения, кнопка видна только в случае, если значение непустое",type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"readonly",description:"Является ли поле полем только для чтения",type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"required",description:"Является ли поле обязательным",type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"disabled",description:"Отключено ли поле",type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"invalid",description:"Содержит ли поле некорректное значение",type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"multiline",description:"Превращает поле в многострочное",type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"rows",description:"Нативный атрибут HTMLTextAreaElement",type:{name:"number|string"},defaultValue:{func:!1,value:"2"}},{name:"cols",description:"Нативный атрибут HTMLTextAreaElement",type:{name:"number|string"},defaultValue:{func:!1,value:"20"}},{name:"outlined",description:"Стиль поля – с рамкой или без",type:{name:"boolean"},defaultValue:{func:!1,value:"true"}}],events:[{name:"input",type:{names:["Event"]},description:"Стандартное для input/textarea элементов"},{name:"keydown",type:{names:["KeyboardEvent"]},description:"Стандартное для input/textarea элементов"},{name:"change",type:{names:["Event"]},description:"Стандартное для input/textarea элементов"},{name:"paste",type:{names:["ClipboardEvent"]},description:"Стандартное для input/textarea элементов"},{name:"focus",type:{names:["FocusEvent"]},description:"Стандартное для input/textarea элементов"},{name:"blur",type:{names:["Event"]},description:"Стандартное для input/textarea элементов"},{name:"update:focused",type:{names:["boolean"]},description:"Изменения флага – в фокусе/не в фокусе, можно использовать с v-model"},{name:"update:value",type:{names:["union"],elements:[{name:"string"},{name:"number"}]},description:"Изменения значения поля, можно использовать с v-model"},{name:"clear",description:"Появляется после нажатия на кнопку очистки"}],slots:[{name:"default"},{name:"leading-icon"},{name:"trailing-icon"}],sourceFiles:["/home/runner/work/embed-ui/embed-ui/packages/v1-components/src/host/components/textbox/UiTextbox.vue"]};const Be={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"};function Te(e,l){return p(),m("svg",Be,[...l[0]||(l[0]=[P("path",{fill:"currentColor",d:"M8.138 11.06A.52.52 0 0 1 8 10.705c0-.133.05-.261.138-.355l.187-.2A.44.44 0 0 1 8.66 10h6.68a.44.44 0 0 1 .335.15l.187.2a.52.52 0 0 1 .138.355c0 .133-.05.26-.138.355l-3.536 3.788A.43.43 0 0 1 12 15a.43.43 0 0 1-.326-.152z"},null,-1)])])}const Ue={render:Te};export{Ue as I,h as S,y as T,Me as _,s as a};
