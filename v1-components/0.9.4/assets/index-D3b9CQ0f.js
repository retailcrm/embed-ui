var d=Object.defineProperty;var f=(n,t,e)=>t in n?d(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e;var c=(n,t,e)=>f(n,typeof t!="symbol"?t+"":t,e);const m=n=>n===1?0:1,h=n=>n===1?0:1,g=(n,t)=>{if(t===2)return n===1?0:1;const e=n%100;return e%10===1&&e!==11?0:e%10>=2&&e%10<=4&&!(e>=10&&e<15)?1:2},p=(n,t)=>{let e=0,r=n[t[0]];for(;e<t.length;){if(typeof r=="string"&&e+1===t.length)return r;if(typeof r!="object")return;r=r[t[++e]]}return r},b=(n,t)=>Object.keys(t).reduce((e,r)=>{const s=new RegExp(`\\{${r}\\}`,"g"),i=String(t[r]);return e.replace(s,i)},n),v=(n,t,e=void 0)=>{const r=p(n,t);return typeof r=="string"&&e?b(r,e):r},a=n=>{throw new Error(n)},z=(n,t,e,r=void 0)=>{const s=e.split(".");if(n){const i=v(t[n]??{},s,r);return typeof i!="object"?i:a(`Translation for "${n}:${e}" is not translatable`)}},w=(n,t,e)=>{const r=n.split("|");return r[e(t,r.length)]};class u{constructor(t=void 0,e=void 0){c(this,"parent");c(this,"messages");c(this,"computed");c(this,"pluralization");c(this,"fallback");this.parent=e,this.messages=(t==null?void 0:t.messages)??{},this.computed=(t==null?void 0:t.computed)??{},this.pluralization={"en-GB":m,"es-ES":h,"ru-RU":g,...(t==null?void 0:t.pluralization)??{}},this.fallback=t==null?void 0:t.fallback}t(t,e,r=void 0){try{const s=i=>z(i,this.messages,e,r);return s(t)??s(this.fallback)??a(`Translation for "${e}" does not exists`)}catch(s){if(this.parent)return this.parent.t(t,e,r);throw s}}tc(t,e,r,s=void 0){return w(this.t(t,e,s),r,this.pluralization[t])}compute(t,e,r){const s=this.computed[e];return s?s(o(this,t),r):this.parent?this.parent.compute(t,e,r):a("Key "+e+" is not registered")}extend(t){return new u({pluralization:this.pluralization,fallback:this.fallback,...t},this)}}const o=(n,t)=>({t(e,r=void 0){return n.t(t,e,r)},tc(e,r,s=void 0){return n.tc(t,e,r,s)},compute(e,r){return n.compute(t,e,r)}}),l="en-GB",x=(n=void 0,t=void 0)=>{const e=new u({...n,fallback:l},t),r=(s,i=void 0)=>i?s.extend(i):s;return{i18n:e,init:(s,i=void 0)=>o(r(e,i),s),fallback:l}};export{x as d};
