import{g as E,j as N,o as v,w as X,a as F,R as J,A as Q,k as Z,n as ee,q as ae,y as te,i as ne,r as x,h as L,J as oe,c as S,s as se,P as re,Q as ie}from"./iframe-D39tYAK0.js";import{_ as de}from"./UiTransition-CjGPWdxw.js";import{I as le}from"./plugin-CIjfQeXn.js";import{j as i}from"./index-Djyvt97q.js";import{useMDXComponents as B}from"./index-Cdf3Trmt.js";import"./preload-helper-PPVm8Dsz.js";const I=E({__name:"UiLoader",props:{diameter:{type:[Number,String],default:40},thickness:{type:[Number,String],default:2},transition:{type:null,validator:e=>typeof e=="string"||e===null,default:"fade-2"},fixed:{type:Boolean,default:!1},overlay:{type:Boolean,default:!0}},setup(e){return(t,o)=>(v(),N(te(e.transition?de:"div"),ee(ae(e.transition?{appear:!0,class:"ui-v1-loader-wrapper",name:e.transition}:{})),{default:X(()=>[F("div",{class:Q({"ui-v1-loader":!0,"ui-v1-loader_fixed":e.fixed,"ui-v1-loader_overlay":e.overlay}),style:J({"--diameter":`${e.diameter}px`,"--thickness":`${e.thickness}px`})},[Z(t.$slots,"default",{},()=>[o[0]||(o[0]=F("div",{class:"ui-v1-loader__icon"},null,-1))])],6)]),_:3},16))}});I.__docgenInfo={exportName:"default",displayName:"UiLoader",description:"",tags:{},props:[{name:"diameter",description:"Диаметр (размер) окружности индикатора",type:{name:"number|string"},defaultValue:{func:!1,value:"40"}},{name:"thickness",description:"Толщина окружности индикатора",type:{name:"number|string"},defaultValue:{func:!1,value:"2"}},{name:"transition",description:"Тип анимации перехода",type:{name:"string | null"},defaultValue:{func:!1,value:"'fade-2'"}},{name:"fixed",description:"Фиксированное позиционирование индикатора",type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"overlay",description:"Показ полупрозрачной подложки",type:{name:"boolean"},defaultValue:{func:!1,value:"true"}}],slots:[{name:"default",description:"Слот для иконки индикатора"}],sourceFiles:["/home/runner/work/embed-ui/embed-ui/packages/v1-components/src/host/components/loader/UiLoader.vue"]};const ce=(e,t)=>new Promise((o,f)=>{const s=e.createElement("script");s.async=!0,s.src=t,s.onload=c=>o(c),s.onerror=(c,w,y,r,u)=>{console.error(`Failed to load script from ${t}`,{event:c,source:w,lineno:y,colno:r,error:u}),f(u)},(e.head||e.getElementsByTagName("head")[0]).appendChild(s)}),ue={class:"ui-v1-yandex-map"},M=E({__name:"UiYandexMap",props:{apiKey:{type:String,required:!0},address:{type:String,default:""}},emits:["change","update:address"],setup(e,{emit:t}){const o=e,f=t,s=ne(le,null),d=x(null),c=()=>d.value?.contentDocument??null,w=()=>d.value?.contentWindow??null,y=()=>{const a=w();return a&&"ymaps3"in a?a.ymaps3:null},r={center:[37.64,55.76],zoom:10},u=(a=5)=>{if(d.value?.contentDocument)return Promise.resolve();if(a<=1)throw new Error("iframe contentDocument wasn't loaded");return new Promise(n=>setTimeout(async()=>{await u(a--),n(0)},100))},h=x(!1),k=L(()=>({"en-GB":"en_US","es-ES":"en_US","ru-RU":"ru_RU"})[s?.locale??"en-GB"]),_=L(()=>`https://api-maps.yandex.ru/v3/?apikey=${o.apiKey}&lang=${k.value}`),D=x(0),j=a=>`https://geocode-maps.yandex.ru/1.x/?apikey=${o.apiKey}&geocode=${a}&lang=${k.value}&format=json`;function G(a){K(a).then(n=>{f("change",n),f("update:address",n)})}const K=async a=>(await(await fetch(j(a.toString()))).json()).response.GeoObjectCollection.featureMember[0]?.GeoObject?.metaDataProperty?.GeocoderMetaData?.Address?.formatted??"",V=async a=>(await(await fetch(j(a))).json()).response.GeoObjectCollection.featureMember[0]?.GeoObject?.Point.pos??"",A=async()=>{await u();const a=c();if(a){const n=a.createElement("style");n.innerHTML="body { margin: 0; }",a.head.appendChild(n),await ce(a,_.value),await y()?.ready;const p=a.createElement("div");p.setAttribute("id","map"),a.body.appendChild(p),h.value=!0;const b=y(),{YMap:P,YMapControls:U,YMapDefaultFeaturesLayer:O,YMapDefaultSchemeLayer:R}=b,{YMapZoomControl:T,YMapGeolocationControl:z}=await b.import("@yandex/ymaps3-controls@0.0.1"),{YMapDefaultMarker:q}=await b.import("@yandex/ymaps3-markers@0.0.1");if(o.address){const l=await V(o.address);l&&(r.center=l.split(" ").map(C=>Number(C)))}const m=new P(p,{location:r});m.addChild(new R({})),m.addChild(new U({position:"right"}).addChild(new T({}))),m.addChild(new O({id:"features"})),m.addChild(new U({position:"left"}).addChild(new z({})));const H=l=>{const C=`Longitude: ${l[0].toFixed(2)}`,W=`Latitude: ${l[1].toFixed(2)}`;$.update({coordinates:l,title:`${C} <br> ${W}`})},$=new q({coordinates:r.center,draggable:!0,title:`Longitude: ${r.center[0].toFixed(2)} <br>
              Latitude ${r.center[1].toFixed(2)}`,onDragMove:H,onDragEnd:G});m.addChild($)}};return oe(_,async(a,n)=>{d.value&&a!==n&&(h.value=!1,D.value++)}),(a,n)=>(v(),S("div",ue,[h.value?se("",!0):(v(),N(I,{key:0})),re((v(),S("iframe",{ref_key:"iframe",ref:d,key:D.value,onLoad:A},null,32)),[[ie,h.value]])]))}});M.__docgenInfo={exportName:"default",displayName:"UiYandexMap",description:"",tags:{},props:[{name:"apiKey",type:{name:"string"},required:!0},{name:"address",type:{name:"string"},defaultValue:{func:!1,value:"''"}}],events:[{name:"change"},{name:"update:address"}],sourceFiles:["/home/runner/work/embed-ui/embed-ui/packages/v1-components/src/host/components/yandex-map/UiYandexMap.vue"]};function Y(e){const t={a:"a",h1:"h1",p:"p",...B(),...e.components};return i.jsxs(i.Fragment,{children:[i.jsx(t.h1,{id:"uiyandexmap",children:"UiYandexMap"}),`
`,i.jsxs(t.p,{children:[`Экспериментальный компонент. На данный момент используется только в составе примеров
в репозитории `,i.jsx(t.a,{href:"https://github.com/retailcrm/core-ui-extensions-examples",rel:"nofollow",children:"@retailcrm/core-ui-extensions-examples"})]})]})}function pe(e={}){const{wrapper:t}={...B(),...e.components};return t?i.jsx(t,{...e,children:i.jsx(Y,{...e})}):Y(e)}const xe={title:"Experimental/UiYandexMap",component:M,args:{apiKey:"dd51f938-0693-457d-ae62-6d50fa668d0a",address:""},argTypes:{apiKey:{control:!1},address:{control:!1}},render:e=>({components:{UiYandexMap:M},setup(){const{apiKey:t,address:o}=e;return{apiKey:t,address:x(o)}},template:`
        <div class="mb-4" style="width: 640px; max-width: 100%;">
            <UiYandexMap
                v-model:address="address"
                :api-key="apiKey"
            />
        </div>

        <p>Выбранный адрес:</p>

        {{ address }}
    `}),parameters:{docs:{page:pe},layout:"centered"}},g={};g.parameters={...g.parameters,docs:{...g.parameters?.docs,source:{originalSource:"{}",...g.parameters?.docs?.source}}};const we=["Sandbox"];export{g as Sandbox,we as __namedExportsOrder,xe as default};
