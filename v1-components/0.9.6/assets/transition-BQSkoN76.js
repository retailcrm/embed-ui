import"./iframe-D39tYAK0.js";const d=Symbol("$embedModal"),n=async()=>new Promise(r=>requestAnimationFrame(r));class o{registry;started=!1;constructor(){this.registry=[]}start(){this.started||(this.started=!0,document.addEventListener("keydown",e=>{if(e.key==="Escape"&&!e.altKey&&!e.ctrlKey&&!e.metaKey&&!e.shiftKey){const t=this.registry.find(s=>!s.isOverlapped());t&&t.emitEscape()}}))}add(e){this.registry.some(t=>t.id===e.id)||(this.registry.push(e),this.refresh())}remove(e){this.registry=this.registry.filter(t=>t.id!==e.id),this.refresh()}replace(e,t){const s=this.registry.findIndex(i=>i.id===e);if(s===-1)throw new Error("[@embed-ui/modal] replace(): layer was not found");this.registry.splice(s,1,t),this.refresh()}refresh(){if(!this.registry.length){this.toggleOverflow();return}let e=!1;for(let t=this.registry.length-1;t>=0;t--)this.registry[t].setIsOverlapped(e),e||(e=this.registry[t].isBlocker());this.toggleOverflow()}toggleOverflow(){const e=document.documentElement.style;this.registry.some(t=>t.isBlocker())?e.overflow="hidden":e.overflow==="hidden"&&e.removeProperty("overflow")}}const h=new o;let l=0;const y=r=>`${r}-${++l}`;export{d as M,h as l,n,y as u};
