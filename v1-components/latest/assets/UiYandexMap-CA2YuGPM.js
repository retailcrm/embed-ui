import{g as U,q as N,o as v,w as T,a as D,N as q,n as H,j as R,x as W,y as Z,M as J,i as Q,r as x,h as L,C as X,c as F,v as ee,K as ae,L as te}from"./iframe-CzwIxcDt.js";import{_ as ne}from"./UiTransition-Kg8ZojDG.js";import{I as oe}from"./plugin-yyqTwYeo.js";const S=U({__name:"UiLoader",props:{diameter:{type:[Number,String],default:40},thickness:{type:[Number,String],default:2},transition:{type:null,validator:a=>typeof a=="string"||a===null,default:"fade-2"},fixed:{type:Boolean,default:!1},overlay:{type:Boolean,default:!0}},setup(a){return(r,n)=>(v(),N(J(a.transition?ne:"div"),W(Z(a.transition?{appear:!0,class:"ui-v1-loader-wrapper",name:a.transition}:{})),{default:T(()=>[D("div",{class:H({"ui-v1-loader":!0,"ui-v1-loader_fixed":a.fixed,"ui-v1-loader_overlay":a.overlay}),style:q({"--diameter":`${a.diameter}px`,"--thickness":`${a.thickness}px`})},[R(r.$slots,"default",{},()=>[n[0]||(n[0]=D("div",{class:"ui-v1-loader__icon"},null,-1))])],6)]),_:3},16))}});S.__docgenInfo={exportName:"default",displayName:"UiLoader",description:"",tags:{},props:[{name:"diameter",description:"Диаметр (размер) окружности индикатора",type:{name:"number|string"},defaultValue:{func:!1,value:"40"}},{name:"thickness",description:"Толщина окружности индикатора",type:{name:"number|string"},defaultValue:{func:!1,value:"2"}},{name:"transition",description:"Тип анимации перехода",type:{name:"string | null"},defaultValue:{func:!1,value:"'fade-2'"}},{name:"fixed",description:"Фиксированное позиционирование индикатора",type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"overlay",description:"Показ полупрозрачной подложки",type:{name:"boolean"},defaultValue:{func:!1,value:"true"}}],slots:[{name:"default",description:"Слот для иконки индикатора"}],sourceFiles:["/home/runner/work/embed-ui/embed-ui/packages/v1-components/src/host/components/loader/UiLoader.vue"]};const se=(a,r)=>new Promise((n,p)=>{const o=a.createElement("script");o.async=!0,o.src=r,o.onload=l=>n(l),o.onerror=(l,g,f,s,c)=>{console.error(`Failed to load script from ${r}`,{event:l,source:g,lineno:f,colno:s,error:c}),p(c)},(a.head||a.getElementsByTagName("head")[0]).appendChild(o)}),re={class:"ui-v1-yandex-map"},ie=U({__name:"UiYandexMap",props:{apiKey:{type:String,required:!0},address:{type:String,default:""}},emits:["change","update:address"],setup(a,{emit:r}){const n=a,p=r,o=Q(oe,null),i=x(null),l=()=>i.value?.contentDocument??null,g=()=>i.value?.contentWindow??null,f=()=>{const e=g();return e&&"ymaps3"in e?e.ymaps3:null},s={center:[37.64,55.76],zoom:10},c=(e=5)=>{if(i.value?.contentDocument)return Promise.resolve();if(e<=1)throw new Error("iframe contentDocument wasn't loaded");return new Promise(t=>setTimeout(async()=>{await c(e--),t(0)},100))},y=x(!1),C=L(()=>({"en-GB":"en_US","es-ES":"en_US","ru-RU":"ru_RU"})[o?.locale??"en-GB"]),b=L(()=>`https://api-maps.yandex.ru/v3/?apikey=${n.apiKey}&lang=${C.value}`),M=x(0),k=e=>`https://geocode-maps.yandex.ru/1.x/?apikey=${n.apiKey}&geocode=${e}&lang=${C.value}&format=json`;function Y(e){j(e).then(t=>{p("change",t),p("update:address",t)})}const j=async e=>(await(await fetch(k(e.toString()))).json()).response.GeoObjectCollection.featureMember[0]?.GeoObject?.metaDataProperty?.GeocoderMetaData?.Address?.formatted??"",B=async e=>(await(await fetch(k(e))).json()).response.GeoObjectCollection.featureMember[0]?.GeoObject?.Point.pos??"",I=async()=>{await c();const e=l();if(e){const t=e.createElement("style");t.innerHTML="body { margin: 0; }",e.head.appendChild(t),await se(e,b.value),await f()?.ready;const u=e.createElement("div");u.setAttribute("id","map"),e.body.appendChild(u),y.value=!0;const h=f(),{YMap:E,YMapControls:_,YMapDefaultFeaturesLayer:G,YMapDefaultSchemeLayer:V}=h,{YMapZoomControl:A,YMapGeolocationControl:P}=await h.import("@yandex/ymaps3-controls@0.0.1"),{YMapDefaultMarker:K}=await h.import("@yandex/ymaps3-markers@0.0.1");if(n.address){const d=await B(n.address);d&&(s.center=d.split(" ").map(w=>Number(w)))}const m=new E(u,{location:s});m.addChild(new V({})),m.addChild(new _({position:"right"}).addChild(new A({}))),m.addChild(new G({id:"features"})),m.addChild(new _({position:"left"}).addChild(new P({})));const O=d=>{const w=`Longitude: ${d[0].toFixed(2)}`,z=`Latitude: ${d[1].toFixed(2)}`;$.update({coordinates:d,title:`${w} <br> ${z}`})},$=new K({coordinates:s.center,draggable:!0,title:`Longitude: ${s.center[0].toFixed(2)} <br>
              Latitude ${s.center[1].toFixed(2)}`,onDragMove:O,onDragEnd:Y});m.addChild($)}};return X(b,async(e,t)=>{i.value&&e!==t&&(y.value=!1,M.value++)}),(e,t)=>(v(),F("div",re,[y.value?ee("",!0):(v(),N(S,{key:0})),ae((v(),F("iframe",{ref_key:"iframe",ref:i,key:M.value,onLoad:I},null,32)),[[te,y.value]])]))}});ie.__docgenInfo={exportName:"default",displayName:"UiYandexMap",description:"",tags:{},props:[{name:"apiKey",type:{name:"string"},required:!0},{name:"address",type:{name:"string"},defaultValue:{func:!1,value:"''"}}],events:[{name:"change"},{name:"update:address"}],sourceFiles:["/home/runner/work/embed-ui/embed-ui/packages/v1-components/src/host/components/yandex-map/UiYandexMap.vue"]};export{ie as _};
