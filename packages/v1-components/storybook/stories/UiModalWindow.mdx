import ToReact from '../ToReact.ts'

import UiModalWindow from './UiModalWindow.example.vue'

# UiModalWindow

Модальное окно, используемое для создания диалоговых окон и отдельных слоев интерфейса.


## Общие правила
Модальное окно всегда появляется на полупрозрачной подложке `#2D336C (40%)`. Клик по ней приводит к закрытию окна.
Страница под окном не должна прокручиваться.

В системе используется следующие типы модальных окон:
* Фиксированное окно с шириной `880px`. Если модальное окно умещается в размеры области просмотра, оно всегда отображается по центру.
Размер окна по ширине никогда не меняется и не адаптируется при изменении разрешения, и всегда составляет `880px`.
Высота окна может меняться в зависимости от содержания.

  Если высота окна больше высоты области просмотра, то от верхней границы браузера оставляется отступ `56px`, а нижняя
граница уходит за пределы нижней границы браузера. Во время прокрутки, за `24px` до достижения верхней границы браузера,
шапка модального окна закрепляется.

  Футер при прокрутке закреплен в нижней части экрана. Когда контент окна полностью прокручен, футер приподнимается на
`56px`;
* Фиксированное окно с шириной `720px` и высотой `466px`. Отображается при клике на объект-триггер и закрываются кликом
на крестик в углу или за пределами всплывающей подсказки. Крестик в углу по умолчанию должен быть белого цвета с
прозрачностью `60%`, а при наведении без прозрачности.

  Компонент всегда появляется на полупрозрачной подложке `#2D336C (40%)`. Клик по ней приводит к закрытию окна.
Страница под окном не должна прокручиваться.

  Текст внизу может быть не более `2` строчек;

* Фиксированное с шириной `464px`, для диалоговых окон;
* Резиновое с шириной `100%`, для полноценных слоев сложного интерфейса. Размещается в центре страницы. Отступы от любой
границы составляет `32px`. Не может выходить за пределы браузера, так как контент прокручивается внутри него.
Шапка и футер у данного типа окна закреплены и не прокручиваются. При достижении ширины `1680px` окно перестает
увеличиваться и фиксируется по центру браузера.

Если нужно модальное окно меньшего размера, то лучше использовать компонент `UiModalSidebar`.


## API

### Виды модальных окон

Предусмотрены следующие виды модальных окон:
* `alert` — отображает простое сообщение пользователю. Часто используется для уведомлений, предупреждений или запроса подтверждения,
вывода информации. Окно с фиксированной шириной — `464px`;
* `dialog` — отображает диалоговое окно на веб-странице. В отличие `alert` предоставляет более гибкие функциональные возможности
для взаимодействия с пользователем, включая поддержку кнопок и формы для ввода данных. Окно с фиксированной шириной — `464px`;
* `popup` — базовый вид модального окна, используемый для уведомления, предоставления формы ввода данных и других важных взаимодействий.
Окно с фиксированной шириной — `880px`;
* `hint` — отображает подсказочное окно, используемое когда одного текстового описания во всплывающей подсказке не достаточно
и нужно наглядно показать, где находится объект. Не является фокусируемым и не может содержать интерактивные элементы для взаимодействия.
Окно с фиксированными шириной — `720px` и высотой — `466px`.

Каждый вид модальных окон блокирует дальнейшее взаимодействие со страницей, пока пользователь не закроет его.
Чтобы использовать одну из визуализаций, необходимо передать в свойство `appearance` одно из вышеперечисленных значений.

<div style={{ display: 'flex', columnGap: '16px', paddingLeft: '16px' }}>
    <ToReact is={UiModalWindow} buttonTitle="Alert" appearance="alert" />
    <ToReact is={UiModalWindow} buttonTitle="Dialog" appearance="dialog" />
    <ToReact is={UiModalWindow} buttonTitle="Popup" appearance="popup" />
    <ToReact is={UiModalWindow} buttonTitle="Hint" appearance="hint" />
</div>


### Управление состоянием

Модальное окно может быть закрыто:
* нажатием на иконку закрытия, либо клавишей `Esc`;
* смена состояния флага `opened`;
* кликом вне области панели.

При необходимости можно запретить закрывать модальное окно вышеперечисленными способами, если выключить флаг `closable`. Тогда
окно будет оставаться в открытом состоянии до тех пор, пока не станет вновь закрываемой.

Для настройки времени удаления плавающего элемента со страницы, если он был скрыт, используется свойство `disposeTimeout`.
Значение задаётся в миллисекундах, поддерживаются как числа, так и строковые форматы.

Для модальных окон вида `popup` предусмотрено поведения перехода из модального окна в полноэкранный режим посредством включения
флага `fullscreen`.

<ToReact
    is={UiModalWindow}
    buttonTitle="Модальное окно в полноэкранном режиме"
    appearance="popup"
    style={{ paddingLeft: `16px` }}
    fullscreen
/>


### Прокрутка

В базовом поведении при прокрутке шапка фиксируется сверху и не прокручивается. Но если для модального окна включён флаг
`responsive`, то окно становится "резиновым", то есть:
* размещается в центре страницы и отступы от любой границы составляет `32px`;
* не может выходить за пределы браузера, так как контент прокручивается внутри него;
* шапка и футер закреплены и не прокручиваются;
* при достижении ширины `1680px` окно перестает увеличиваться и фиксируется по центру браузера.

<div style={{ display: 'flex', columnGap: '16px', paddingLeft: '16px' }}>
    <ToReact is={UiModalWindow} buttonTitle="Стандортное модальное окно" appearance="popup" />
    <ToReact is={UiModalWindow} buttonTitle="Резиновое модальное окно" appearance="popup" responsive />
</div>

По-умолчанию, содержимое тела модального окна помещается в контейнер, содержащий полосу прокрутки. Данное состояние определяется
свойством `scrolling` со значением `normal`. Вид полосы прокрутки можно поменять на стандартный, предоставляемый браузерами.
Для этого необходимо установить значение `native`.

Чтобы отключить прокрутку в модальных окнах, необходимо отключить флаг `responsive`.


### Вложенность

Допускается вкладывать компоненты модальных окон друг в друга, при этом вложенные будут "телепортироваться" в конец
контейнера для модальных элементов (по-умолчанию это `document.body`).

<ToReact
    is={UiModalWindow}
    buttonTitle="Одно окно вложено в другое"
    style={{ paddingLeft: `16px` }}
    hasNesting
/>

Допустимо расположение окон на одном уровне, но кнопка открытия второго окна находится внутри первого.

<ToReact
    is={UiModalWindow}
    buttonTitle="Вложенное на одном уровне окно"
    style={{ paddingLeft: `16px` }}
    hasNesting
    nestedOnSameLevel
/>

В качестве дочерних модальных окон можно использовать и другие модальные элементы на основе `UiModal`, например,
`UiModalWindow`.


## Слоты

Для настройки заголовка в шапке модального окна имеется слот `title`. Для модального окна вида `alert` предусмотрен
дополнительный слот `icon`, позволяющий передать иное изображение слева от заголовка.

Слот `default` позволяет передать содержимое тела модального окна.

Футер модального окна отображается, если определён слот `footer`. Чаще всего в нём содержатся кнопки сохранения, отмены и третичные
кнопки копирования и удаления.

<ToReact
    is={UiModalWindow}
    buttonTitle="Модальное окно с заданными слотами"
    appearance="alert"
    style={{ paddingLeft: `16px` }}
/>


## События

Компонент возвращает событие:
* `update:opened` — при открытии/закрытии модального окна;
* `toggle` — при открытии/закрытии модального окна. Содержит актуальное значение флага `opened`;
* `open` — при открытии модального окна;
* `opened` — при завершении открытия модального окна;
* `close` — при закрытии модального окна;
* `closed` — при завершении закрытия модального окна;
* `close-cancel` — при попытке закрыть модальное окно, если флаг `closable` выключен;
* `container:scroll:y` — при прокрутке контейнера модального окна;
* `container:scroll:y:end` — при прокрутке контейнера в самый конец по y-оси;
* `content:scroll:y:end` — при прокрутке контента в самый конец по y-оси.
